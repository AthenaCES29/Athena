<link rel="stylesheet" href="/static/css/bootstrap-tagsinput.css" />
<script src="/static/js/bootstrap-tagsinput.min.js"></script>
<div role="tabpanel" class="tab-pane fade" id={{turma.id}}>
  <div class="row content">
    <div class="col-xs-12 col-md-3">
      <div class="thumbnail">
        <div class="caption">
          <h3 align="center">Atividades</h3>
          <br>
          {% for atividade in atividades %}
          <form method="GET" enctype="multipart/form-data">
            <input type="hidden" name="load_atividade" value="True">
            <input type="hidden" name="id_ativ" value={{atividade.id}}>
            <p>{{atividade.data_limite}} - <a href="../prof_ativ/{{atividade.id}}/" type="submit"> {{atividade.nome}} </a></p>
          </form>
          {% endfor %}
          <br>
          <form method="POST" enctype="multiplart/form-data">
            <input type="hidden" name="post_down_all_notas" value="True">
            <input type="hidden" name="id_turma" value={{turma.id}}>
            {% csrf_token %}
            <p><button class="btn btn-success btn-lg btn-block" type="submit"><span class="glyphicon glyphicon-save"></span> Download das notas</button></p>
          </form>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-md-3">
      <div class="thumbnail">
        <div class="caption">
          <h3 align="center">Abrir nova atividade</h3>
          <br>
          <form method="POST" enctype="multipart/form-data">
            <input type="hidden" name="post_atividade" value="True">

            <input type="hidden" name="id_turma" value={{turma.id}}>
            {% csrf_token %}
            {% for field in form %}
            <div class="form-group">
              <label for="{{field.id}}">{{field.label}}:</label>
              {{field}}
            </div>
            {% endfor %}

              <div class="form-group">
                <!-- Testes com Restrições -->
                <label>Restrições na Submissão:</label>
                    <input type="text" name={{turma.id}}-restricoes class="form-control" value="goto" data-role="tagsinput" id="id_{{turma.id}}-restricoes"/>
                            <script>
                              $("#restricoes").tagsinput({
                                maxChars: 36,
                                trimValue: true,
                                tagClass: 'label label-danger label-important'
                              });
                            </script>
                <br>
              </div>
                <!-- Testes Públicos -->
                <div class="thumbnail">
                  <!-- Rounded switch -->
                  <div align="left">
                    <h4>Testes Públicos:</h4>
                    <label class="switch">
                      <input type="checkbox" unchecked id="id_{{turma.id}}-teste_publico" name={{turma.id}}-teste_publico>
                      <div class="slider round"></div>
                      <script>
                        $("#id_{{turma.id}}-teste_publico").click(function() { 
                          if ($("#id_{{turma.id}}-teste_publico").is(":checked")) {
                            $("#{{turma.id}}-fieldPublic1").fadeIn("slow");
                            if (!$("#id_{{turma.id}}-teste_customizado").is(":checked")) {
                              $("#{{turma.id}}-fieldPublic2").fadeIn("slow");
                              $("#{{turma.id}}-fieldPublic3").fadeIn("slow");
                            }
                          } else {
                            $("#{{turma.id}}-fieldPublic1").fadeOut("slow");
                            $("#{{turma.id}}-fieldPublic2").fadeOut("slow");
                            $("#{{turma.id}}-fieldPublic3").fadeOut("slow");
                          } 
                        });
                      </script>
                    </label>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldPublic1" hidden>
                    <p>Essa opção é obrigatória para a lógica convencional, pois o teste público tem caráter obrigatório.</p>
                    <label>Arquivo de entrada público:</label>
                    <input type="file" id="id_{{turma.id}}-arquivo_entrada" name={{turma.id}}-arquivo_entrada>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldPublic2" hidden>
                    <div align="left"><label>Arquivo de saida público:</label></div>
                    <input type="file" id="id_{{turma.id}}-arquivo_saida" name={{turma.id}}-arquivo_saida>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldPublic3" hidden>
                    <div align="left"><label>Peso do arquivo público:</label></div>
                    <input type="text" id="id_{{turma.id}}-peso1" value="1" name={{turma.id}}-peso1>
                  </div>
                </div>

                <!-- Testes Privados -->
                <div class="thumbnail">
                  <!-- Rounded switch -->
                  <div class="form-group" align="left">
                    <h4>Testes Privados:</h4>
                    <label class="switch">
                      <input type="checkbox" unchecked id="id_{{turma.id}}-teste_privado" name={{turma.id}}-teste_privado>
                      <div class="slider round"></div>
                      <script>
                        $("#id_{{turma.id}}-teste_privado").click(function() { 
                          if ($("#id_{{turma.id}}-teste_privado").is(":checked")) {
                            $("#{{turma.id}}-fieldPriv1").fadeIn("slow");
                            if (!$("#id_{{turma.id}}-teste_customizado").is(":checked")) {
                              $("#{{turma.id}}-fieldPriv2").fadeIn("slow");
                              $("#{{turma.id}}-fieldPriv3").fadeIn("slow");
                            }
                          } else {
                            $("#{{turma.id}}-fieldPriv1").fadeOut("slow");
                            $("#{{turma.id}}-fieldPriv2").fadeOut("slow");
                            $("#{{turma.id}}-fieldPriv3").fadeOut("slow");
                          } 
                        });
                      </script>
                    </label>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldPriv1" hidden>
                    <p>Opcional. Selecionar essa opção fornece um arquivo de teste a mais para a correção. Esse arquivo não pode ser visto pelo aluno.</p>
                    <div align="left"><label>Arquivo de entrada privado:</label></div>
                    <input type="file" id="id_{{turma.id}}-arquivo_entrada2" name={{turma.id}}-arquivo_entrada2>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldPriv2" hidden>
                    <div align="left"><label>Arquivo de saida privado:</label></div>
                    <input type="file" id="id_{{turma.id}}-arquivo_saida2" name={{turma.id}}-arquivo_saida2>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldPriv3" hidden>
                    <div align="left"><label>Peso do arquivo privado:</label></div>
                    <input type="text" id="id_{{turma.id}}-peso2" value="0" name={{turma.id}}-peso2>
                  </div>
                </div>

                <!-- Testes Personalizados -->
                <div class="thumbnail">
                  <!-- Rounded switch -->
                  <div class="form-group" align="left">
                    <h4>Testes Personalizados:</h4>
                    <label class="switch">
                      <input type="checkbox" unchecked id="id_{{turma.id}}-teste_customizado" name={{turma.id}}-teste_customizado>
                      <div class="slider round"></div>
                      <script>
                        $("#id_{{turma.id}}-teste_customizado").click(function() { 
                          if ($("#id_{{turma.id}}-teste_customizado").is(":checked")) {
                            $("#{{turma.id}}-fieldCustom1").fadeIn("slow");
                            $("#{{turma.id}}-fieldPublic2").fadeOut("slow");
                            $("#{{turma.id}}-fieldPublic3").fadeOut("slow");
                            $("#{{turma.id}}-fieldPriv2").fadeOut("slow");
                            $("#{{turma.id}}-fieldPriv3").fadeOut("slow");
                          } else {
                            $("#{{turma.id}}-fieldCustom1").fadeOut("slow");
                            if ($("#id_{{turma.id}}-teste_publico").is(":checked")) {
                              $("#{{turma.id}}-fieldPublic2").fadeIn("slow");
                              $("#{{turma.id}}-fieldPublic3").fadeIn("slow");
                            }
                            if ($("#id_{{turma.id}}-teste_privado").is(":checked")) {
                              $("#{{turma.id}}-fieldPriv2").fadeIn("slow");
                              $("#{{turma.id}}-fieldPriv3").fadeIn("slow");
                            }
                          }
                        });
                      </script>
                    </label>
                  </div>
                  <div class="form-group" id="{{turma.id}}-fieldCustom1" hidden>
                    <p>Opcional. Essa opção sobrescreve testes convencionais. Para utilizar essa opção em conjunto com arquivos de entrada, fornece as entradas nas opções acima.</p>
                    <div align="left"><label>Código do testador:</label></div>
                    <input type="file" id="id_{{turma.id}}-arquivo_testador" name={{turma.id}}-arquivo_testador>
                  </div>
                </div>
            </div>
            <p><button class="btn btn-lg btn-success btn-block" type="submit">Criar</button></p>
          </form>
          <br>
      </div>
    </div>
    <div class="col-xs-12 col-md-3">
      <div class="thumbnail">
        <div class="caption">
          <h3 align="center">Outras operações</h3>  
          <br>
          <form method="POST" enctype="multipart/form-data">
            <label for="close_class">Deletar turma:</label>
            <input type="hidden" name="post_deletar" value="True">
            <input type="hidden" name="id_turma" value={{turma.id}}>
            {% csrf_token %}
            <input class="btn btn-lg btn-block btn-danger" type="submit" value="Deletar">
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- end of row -->
</div>